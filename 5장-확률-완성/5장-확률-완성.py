#!/usr/bin/env python
# coding: utf-8

# # Chapter 05 í™•ë¥ 

# ## 5-1 ì‹œí–‰ê³¼ ì‚¬ê±´

# ### ì‹œí–‰ (trial)

# ë™ì¼í•œ ì¡°ê±´ ì•„ë˜ì„œ ë°˜ë³µí•  ìˆ˜ ìˆìœ¼ë©°, ê·¸ ê²°ê³¼ê°€ ìš°ì—°ì— ì˜í•´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆëŠ” ì‹¤í—˜ ë˜ëŠ” ê´€ì°°

# ### [ì‹¤ìŠµ] ì˜ˆì œ 5-1: ì£¼ì‚¬ìœ„ë¥¼ ë‘ ë²ˆ ë°˜ë³µí•˜ì—¬ ë˜ì§€ëŠ” ì‹œí–‰
# ì£¼ì‚¬ìœ„ë¥¼ ë‘ ë²ˆ ë°˜ë³µí•˜ì—¬ ë˜ì§€ëŠ” ì‹œí–‰ì—ì„œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²½ìš° ë‚˜íƒ€ë‚´ê¸°

# In[ ]:


# ì£¼ì‚¬ìœ„ì—ì„œ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜
# ë°©ë²•1
D1 = list(range(1,7))
D2 = list(range(1,7))
print(f'ì²«ë²ˆì§¸ ì£¼ì‚¬ìœ„ ê²½ìš° ìˆ˜: {D1}')
print(f'ì²«ë²ˆì§¸ ì£¼ì‚¬ìœ„ ê²½ìš° ìˆ˜: {D2}')
print('-'*50)

for i in D1 :
    for j in D2:   
        print(f'({i},{j})', end=' ')
    print()


# https://docs.python.org/ko/3/library/itertools.html
# 

# In[24]:


# ë°©ë²•2
import itertools

D1 = list(range(1,7))
D2 = list(range(1,7))
outcomes = list(itertools.product(D1, D2)) # itertools.product(D1, repeate=2)
for idx, d in enumerate(outcomes):
    if idx%6==0: print()
    print(d, end = ' ')


# --------

# ### ì‚¬ê±´ (event)

# - ì‚¬ê±´: í‘œë³¸ê³µê°„ì˜ ë¶€ë¶„ì§‘í•©
# - í‘œë³¸ê³µê°„(Sample space) : ì–´ë–¤ ì‹œí–‰ ê²°ê³¼ë¡œ ê¸°ë¡ë˜ê±°ë‚˜ ê´€ì°°ë  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²°ê³¼ë“¤ì˜ ì§‘í•©
# - ì›ì†Œ(element) or í‘œë³¸ì (sample point) : ì‹œí–‰ì—ì„œ ë‚˜íƒ€ë‚  ìˆ˜ ìˆëŠ” ê°œê°œì˜ ê²°ê³¼ 
# 

# #### ë™ì „ ë°˜ë³µí•´ì„œ ë‘ ë²ˆ ë˜ì§€ëŠ” ëª¨ë“  ì‚¬ê±´ 

# In[37]:


from itertools import product, chain, combinations

# í‘œë³¸ê³µê°„ 
def get_subsets(t, r):    
    S = list(product(t, repeat=r))  # itertools.product(a,a,a)
    S = [''.join(s) for s in S]   #  ('H,'H')-->'HH'ë¡œ í‘œí˜„
    return S

# ëª¨ë“  ì‚¬ê±´
def get_set_of_subsets(S):    
    return set( [frozenset(s) for s in chain.from_iterable(combinations(S, r)
                                                          for r in range(len(S)+1))] )

    
# ë™ì „ ë˜ì§€ê¸°
t = {'H', 'T'} # coin
r = 2          # repeat
S = get_subsets(t, r)
print(f'ë™ì „ {r}ë²ˆ ë˜ì§€ëŠ” í‘œë³¸ê³µê°„(S): {set(S)}')

events = get_set_of_subsets(S)
events


# ### [ì‹¤ìŠµ] ì˜ˆì œ 5-3: ë™ì „ ì„¸ ë²ˆ ë˜ì§€ëŠ” ì‚¬ê±´
# - í‘œë³¸ê³µê°„(Î©, S) : ì „ì²´ ì‚¬ê±´ 
# - ì‚¬ê±´(A): ì ì–´ë„ ì•ë©´ì´ 2ë²ˆ ì´ìƒ ë‚˜ì˜¤ëŠ” ì‚¬ê±´ 

# In[27]:


import itertools

t = 'HT'  # ['H', 'T']
r = 3
p = 2

S = list(itertools.product(t, repeat=r))  # itertools.product(a,a,a)
A = [a.count('H') for a in S ]

S = [''.join(s) for s in S]   #  ('H,'H','H')-->'HHH'ë¡œ í‘œí˜„
print(f'ë™ì „ ì„¸ë²ˆ ë˜ì§€ëŠ” í‘œë³¸ê³µê°„(S): {set(S)}')

A = [ S[idx] for idx, a in enumerate(A) if a >= p ]
print(f'ì ì–´ë„ ë‘ë²ˆ ì•ë©´ì´ ë‚˜ì˜¤ëŠ” ì‚¬ê±´(A): {set(A)}')


# ### [ì‹¤ìŠµ] ì˜ˆì œ 5-4: ì£¼ì‚¬ìœ„ë¥¼ ë˜ì§€ëŠ” ì‹¤í—˜ì—ì„œì˜ ì‚¬ê±´
# 1. $A âˆ© B$
# 2. $A âˆª B$
# 3. $ğ´^ğ‘$  
# 4. $B - C$
# 5. ë°°ë°˜ì¸ ë‘ ì‚¬ê±´   

# In[11]:


#ì£¼ì‚¬ìœ„ë¥¼ ë˜ì§€ëŠ” ì‹¤í—˜
S = {1,2,3,4,5,6}  #í‘œë³¸ê³µê°„=ì „ì²´ì§‘í•©
A = {1,2,3,4}
B = {4,5}
C = {5,6}


# #### A âˆ© B: (ê³±ì‚¬ê±´ : êµì§‘í•©)

# In[12]:


#  A âˆ© B: (ê³±ì‚¬ê±´ : êµì§‘í•©)
print(A & B)
print(A.intersection(B))


# #### A âˆª B (í•©ì‚¬ê±´ : í•©ì§‘í•©)

# In[13]:


# A âˆª B (í•©ì‚¬ê±´ : í•©ì§‘í•©)
print(A | B)
print(A.union(B))


# #### $ğ´^ğ‘$ (ì—¬ì‚¬ê±´ : ì—¬ì§‘í•©)

# In[14]:


# A^ğ‘ (ì—¬ì‚¬ê±´ : ì—¬ì§‘í•©)
print(S - A)
print(S.difference(A))


# #### B - C (ì°¨ì‚¬ê±´ : ì°¨ì§‘í•©)

# In[15]:


# B - C (ì°¨ì‚¬ê±´ : ì°¨ì§‘í•©)
print(B - C)
print(B.difference(C))


# #### A âˆ© C  = âˆ… (ë°°ë°˜ì¸ ë‘ ì‚¬ê±´ : ê³µì§‘í•©)

# In[16]:


# A âˆ© C = âˆ… (ë°°ë°˜ì¸ ë‘ ì‚¬ê±´ : ê³µì§‘í•©)
print(A & C, '--> ê³µì§‘í•©' )
print(A | C, '--> í‘œë³¸ê³µê°„')
print('Aì™€ CëŠ” Sì˜ ë¶„í• (partition)')


# ### ì‚¬ê±´ì˜ ì—°ì‚° 

#  - í•©ì‚¬ê±´ì˜ ì„±ì§ˆ
#  - ê³±ì‚¬ê±´ì˜ ì„±ì§ˆ
#  - ë¶„ë°°ë²•ì¹™
#  - ë“œëª¨ë¥´ê°„ì˜ ë²•ì¹™

# ### [ì‹¤ìŠµ] ë¶„ë°°ë²•ì¹™ì´ ì„±ë¦½í•˜ëŠ”ì§€ íŒŒì´ì¬ ì½”ë“œë¡œ ì¦ëª…í•˜ì—¬ë¼
# ë‹¤ìŒ ì„¸ ì§‘í•© A, B, Cì— ëŒ€í•´ì„œ ë¶„ë°°ë²•ì¹™ì´ ì„±ë¦½í•˜ëŠ”ì§€ íŒŒì´ì¬ ì½”ë“œë¡œ ì¦ëª…í•˜ê¸°
# - $Aâˆª(Bâˆ©C)$ 
# - $Aâˆ©(BâˆªC)$

# In[3]:


A = {1,3,5}
B = {1,2,3}
C = {2,4,6}

print( A|(B&C) == (A|B)&(A|C) )
print( A&(B|C) == (A&B)|(A&C) )


# ### [ì‹¤ìŠµ] ì˜ˆì œ 5-5:  ì‚¬ê±´ì˜ ì—°ì‚°
# - a. $A âˆ© B âˆ© C$ 
# - b. $(AâˆªB)âˆ© C$
# - c. $(A âˆ© C)^ğ‘$
# - d. $(AâˆªB)^ğ‘$

# In[ ]:


#ì£¼ì‚¬ìœ„ë¥¼ ë˜ì§€ëŠ” ì‹¤í—˜
S = {1,2,3,4,5,6}  #í‘œë³¸ê³µê°„=ì „ì²´ì§‘í•©
A = {1,3,4}
B = {4,5}
C = {3,4,6}


# In[17]:


#(a). A âˆ© B âˆ© C
print(f'a. A âˆ© B âˆ© C: {A & B & C}')

#(b). (AâˆªB)âˆ© C
print(f'b. (AâˆªB)âˆ© C:  {(A|B) & C}')

#(c). (A âˆ© C)^ğ‘
print(f'c. (A âˆ© C)^ğ‘: {S - (A&C)}')
print(f'c. (A âˆ© C)^ğ‘: {(S-A) | (S-C)}')

#(d). (AâˆªB)^ğ‘
print(f'd. (AâˆªB)^ğ‘: {S - (A|B)}')
print(f'd. (AâˆªB)^ğ‘: {(S-A) & (S-B)}')


# --------

# ## 5-2 í™•ë¥ 
# - **í™•ë¥ (Probability)ì´ë€ ì‚¬ê±´(ë¶€ë¶„ì§‘í•©)ì„ ì…ë ¥í•˜ë©´ ìˆ«ì(í™•ë¥ ê°’)ê°€ ì¶œë ¥ë˜ëŠ” í•¨ìˆ˜**ì´ë‹¤.
# - ì¦‰, ëª¨ë“  ê°ê°ì˜ ì‚¬ê±´(ë¶€ë¶„ì§‘í•©)ì— ì–´ë–¤ ìˆ«ìë¥¼ í• ë‹¹í•˜ëŠ” í•¨ìˆ˜ê°€ í™•ë¥ ì´ë‹¤.

# ### í™•ë¥ ì˜ ì˜ë¯¸ - ìˆ˜í•™ì  í™•ë¥ 
# 

# ### [ì‹¤ìŠµ] ì˜ˆì œ 5-6: ì£¼ì‚¬ìœ„ ë˜ì§€ëŠ” ì‚¬ê±´
# - ì£¼ì‚¬ìœ„ë¥¼ ë°˜ë³µí•´ì„œ ì„¸ ë²ˆ ë˜ì ¸ì„œ ì ì–´ë„ ë‘ë²ˆ ì•ë©´ì— ë‚˜ì˜¤ëŠ” í™•ë¥ 

# In[28]:


import itertools

def P(t, r, p):  #ìƒ˜í”Œ, ì‹œí–‰íšŸìˆ˜, ì‚¬ê±´íšŸìˆ˜ 
    S = list(itertools.product(t, repeat=r))  # í‘œë³¸ê³µê°„
    A = [a.count('H') for a in S ]            # ì‚¬ê±´

    # í‘œë³¸ê³µê°„ ì¶œë ¥
    S = [''.join(s) for s in S]   #  ('H,'H','H')-->'HHH'ë¡œ í‘œí˜„
    print(f'ë™ì „ {r}ë²ˆ ë˜ì§€ëŠ” ì „ì²´ ì‚¬ê±´ S: {len(S)}')

    # ì‚¬ê±´ ì¶œë ¥
    A = [ S[idx] for idx, a in enumerate(A) if a >= p]
    print(f'ì ì–´ë„ {p}ë²ˆ ì•ë©´ì´ ë‚˜ì˜¤ëŠ” ì‚¬ê±´ A: {len(A)}')

    # ì‚¬ê±´ í™•ë¥ 
    print(f'ì ì–´ë„ {p}ë²ˆ ì•ë©´ì´ ë‚˜ì˜¤ëŠ” í™•ë¥ : {len(A)/len(S)}')
    
    return len(A)/len(S)

# t = 'HT'  # ['H', 'T']
# r = 3     # ë™ì „ ëª‡ ë²ˆ ë˜ì§€ëŠ”ê°€
# p = 2     # ì•ë©´ì´ ëª‡ë²ˆ ë‚˜ì˜¤ëŠ”ê°€
P(['H', 'T'], 3, 2)


# ### í™•ë¥ ì˜ ì˜ë¯¸ - í†µê³„ì  í™•ë¥ 

# ### ì‹œí–‰íšŒìˆ˜ ì¤‘ê°€ì— ë”°ë¥¸ í™•ë¥ ì˜ ë³€í™” 
# - ì£¼ì‚¬ìœ„ ë˜ì§€ëŠ” ì‹œí–‰ íšŸìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡œ ì•ë©´ì— ë‚˜ì˜¤ëŠ” í™•ë¥ ì€ 0.5ì— ê°€ê¹Œì›Œì§„ë‹¤.

# In[47]:


import random
import math

ns = [50,100,500,1000,2000,2500,5000,10000] # ì‹œí–‰íšŸìˆ˜
rs = []   # ì•ë©´ì˜ ìˆ˜
ps = []   # ì•ë©´ì˜ ìƒëŒ€ë„ìˆ˜

for n in ns:
    tmp= []
    for i in range(n):
        tmp.append( random.choice(['H','T']) )
    r = tmp.count('H')
    rs.append(round(r))
    ps.append(round(r/n,3))


# pandas í…Œì´ë¸” í˜•íƒœë¡œ ë³´ì—¬ì£¼ê¸°    
import pandas as pd
dics = dict()
for idx, n in enumerate(ns):
    key = ns[idx]
    values = [rs[idx], ps[idx]]
    dics[key] = values

df = pd.DataFrame(dics, columns=ns, index=['ì•ë©´ì˜ìˆ˜','ì•ë©´ì˜ìƒëŒ€ë„ìˆ˜'])
df


# In[50]:


import matplotlib.pyplot as plt
    
x = ns
y = ps

plt.plot(x, y, 'o', linestyle='solid' )
plt.axhline(0.5, c='r', ls='--')
plt.grid()
plt.show()


# ### í™•ë¥ ì˜ ì„±ì§ˆ

# #### ì„ì˜ì˜ ì„¸ ì‚¬ê±´ A, B, Cì— ë‹¤ìŒì´ ì„±ë¦½í•œë‹¤.

# In[ ]:


A = {1,2,3}
B = {2,3,4}
C = {3,4,5}

S = A | B | C
print(S)


# In[ ]:




